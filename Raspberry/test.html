<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Socket.io</title>
</head>

<body>
    <h1>Communication avec socket.io !</h1>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect('https://192.168.1.12:8080');
        socket.on("listLamp", msg => {
            var listLamp = msg.list;
            var state = msg.state;
            for (var i = 0; i < listLamp.length; i++) {
                if (state[i]) {
                    console.log(listLamp[i] + " : Allumé");
                } else {
                    console.log(listLamp[i] + " : Eteinte");
                }
            }
        });

        socket.on("lampStateChanged", msg => {

            if (msg.state) {
                console.log("Etat changé : " + msg.location + " : Allumé");
            } else {
                console.log("Etat changé : " + msg.location + " : Eteinte");
            }

        })
        socket.emit("getListLamp", { user: "Valentin" });
        socket.emit("changeLampState", { location: "Cuisine", state: true, brigtness: 50 });
    </script>
</body>

</html>